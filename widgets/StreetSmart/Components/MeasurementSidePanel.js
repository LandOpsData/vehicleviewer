function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var geomTypes={POINT:'POINT',LINE:'LINE',POLYGON:'POLYGON'};var EsriGeomTypes={'esriGeometryPoint':[geomTypes.POINT],'esriGeometryPolyline':[geomTypes.LINE],'esriGeometryPolygon':[geomTypes.POLYGON]};define(['react','./Layer'],function(React,Layer){return function(_React$Component){_inherits(MeasurementSidePanel,_React$Component);function MeasurementSidePanel(){_classCallCheck(this,MeasurementSidePanel);var _this=_possibleConstructorReturn(this,_React$Component.call(this));_this.state={};return _this}MeasurementSidePanel.prototype.constructLayerList=function constructLayerList(){var map=this.props.widget.map;var ids=map.graphicsLayerIds;var list=[];for(var _iterator=ids,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value}var id=_ref;var layer=map.getLayer(id);layer.type==='Feature Layer'&&layer.isEditable()===true&&list.push(layer)}return list};MeasurementSidePanel.prototype.selectLayer=function selectLayer(id){if(id===this.state.selectedLayer){this.setState({selectedLayer:null})}else{this.setState({selectedLayer:id})}};MeasurementSidePanel.prototype.startMeasurement=function startMeasurement(type){var _props=this.props,widget=_props.widget,togglePanel=_props.togglePanel;widget._selectedLayerID=this.state.selectedLayer;widget.startMeasurement(type);togglePanel(false)};MeasurementSidePanel.prototype.render=function render(){var _this2=this;var layerList=this.constructLayerList();var _props2=this.props,widget=_props2.widget,togglePanel=_props2.togglePanel;var nls=widget.nls,map=widget.map;var selectedLayer=this.state.selectedLayer;var layerGeometryTypes=[];if(selectedLayer){var layer=map.getLayer(selectedLayer);layerGeometryTypes=EsriGeomTypes[layer.geometryType]}else{layerGeometryTypes=[geomTypes.POINT,geomTypes.LINE,geomTypes.POLYGON]}return React.createElement('div',{id:'measurementPanel'},React.createElement('div',{className:'cmt close-button'},React.createElement('button',{id:'side-panel-close-button',className:'close-button glyphicon novaicon-navigation-down-3',onClick:function onClick(){return togglePanel(false)}})),React.createElement('div',{className:'layers-list'},layerList.map(function(l){var isSelected=_this2.state.selectedLayer===l.id;return React.createElement(Layer,{layer:l,isSelected:isSelected,selectLayer:function selectLayer(){_this2.selectLayer(l.id)}})})),React.createElement('div',{className:'measurement-types-list'},React.createElement('h2',null,nls.startMeasurement),React.createElement('div',{className:'cmt measurement-button-container'},React.createElement('button',{className:'measurement-button glyphicon novaicon-custom-dot',disabled:!layerGeometryTypes.includes(geomTypes.POINT),onClick:function onClick(){_this2.startMeasurement(geomTypes.POINT)}}),React.createElement('button',{className:'measurement-button glyphicon novaicon-organization-graph',disabled:!layerGeometryTypes.includes(geomTypes.LINE),onClick:function onClick(){_this2.startMeasurement(geomTypes.LINE)}}),React.createElement('button',{className:'measurement-button glyphicon novaicon-organization-flowchart-1',disabled:!layerGeometryTypes.includes(geomTypes.POLYGON),onClick:function onClick(){_this2.startMeasurement(geomTypes.POLYGON)}}))))};return MeasurementSidePanel}(React.Component)});